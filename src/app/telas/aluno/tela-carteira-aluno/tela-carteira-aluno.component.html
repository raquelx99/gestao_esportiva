<app-top-bar></app-top-bar>

<div class="carteira-aluno-page-container">
  <div class="ca-card-wrapper"> <ng-container *ngIf="matricula; else carregandoOuErro">
      <section class="card carteira-aluno-display-card">
        <h2>Carteira de Acesso</h2>

        <div class="info-grid"> <div><strong>Nome</strong><span>{{ usuarioNome }}</span></div>
        <div><strong>Matrícula</strong><span>{{ matricula }}</span></div>
        <div><strong>Curso</strong><span>{{ curso }}</span></div>
        <div><strong>Centro</strong><span>{{ centro }}</span></div>
        <div><strong>Telefone</strong><span>{{ telefone }}</span></div>
        <div><strong>Telefone urgência</strong><span>{{ telefoneUrgencia }}</span></div>
        </div>

        <div class="espacos-info">
          <strong>Espaços:</strong>
          <div class="espacos-list">
            <span *ngFor="let espaco of espacosCarteirinha" class="espaco-tag">
              {{ espaco }}
            </span>

            <span *ngIf="!espacosCarteirinha || espacosCarteirinha.length === 0" class="sem-espacos-tag">
              Nenhum espaço especificado
            </span>
          </div>
        </div>

        <div class="rodape-carteira">
          <div class="semestre">
            1° Semestre – {{ semestreInicioFormatted }}
          </div>
          <div class="validade" [class.expirada]="isExpired">
            Validade: {{ validadeFormatted }}
          </div>
        </div>
            </section>
            <div class="acoes-carteira-externa" *ngIf="isExpired">
        <button class="btn btn-renovar" (click)="iniciarRenovacao()">Renovar Carteirinha</button>
            </div>

    </ng-container>
    </div> </div>
  
  <ng-template #carregandoOuErro>
    <section class="card carteira-aluno-display-card">
      <h2>Carteira de Acesso</h2>
      <div class="info-grid">
        <div>Carregando dados ou ocorreu um erro ao buscar a matrícula.</div>
      </div>
    </section>
  </ng-template>