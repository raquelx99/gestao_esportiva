<div class="tela-cadastro">
  <div class="cadastro-card">
    <div class="logo-titulo">
      <img src="/logo.png" alt="Logo Gestão Esportiva" class="logo" />
      <h1>GestãoEsportiva</h1>
    </div>

    <h2>Cadastro</h2>
    <form #form="ngForm" (ngSubmit)="onSubmit()">
      <div class="grid-2">
        <div class="form-group">
          <label for="nome">Nome Completo</label>
          <input id="nome" name="nome" type="text" required [(ngModel)]="nome" />
        </div>

        <div class="form-group">
          <label for="matricula">Matrícula</label>
          <input id="matricula" name="matricula" type="text" required [(ngModel)]="matricula" />
        </div>

        <!-- MODIFICADO: Dropdown de Centro agora é dinâmico -->
        <div class="form-group">
          <label for="centro">Centro</label>
          <select
            id="centro"
            name="centro"
            required
            [(ngModel)]="centro"
            (ngModelChange)="onCentroChange($event)"
          >
            <option value="" disabled selected>Selecione um centro</option>
            <!-- Loop sobre a lista de centros do TypeScript -->
            <option *ngFor="let centroOpt of centros" [value]="centroOpt">{{ centroOpt }}</option>
          </select>
        </div>

        <!-- O dropdown de Curso já estava correto, usando availableCursos -->
        <div class="form-group">
          <label for="curso">Curso</label>
          <select
            id="curso"
            name="curso"
            required
            [(ngModel)]="curso"
            [disabled]="availableCursos.length === 0"
          >
            <option value="" disabled selected>Selecione um curso</option>
            <option *ngFor="let c of availableCursos" [value]="c">{{ c }}</option>
          </select>
        </div>

        <div class="form-group">
          <label for="telefone">Telefone</label>
          <input id="telefone" name="telefone" type="tel" required [(ngModel)]="telefone" />
        </div>

        <div class="form-group">
          <label for="senha">Senha</label>
          <input id="senha" name="senha" type="password" required [(ngModel)]="senha" />
        </div>

        <div class="form-group upload-group">
          <label for="docUpload">Foto de documento de identificação</label>
          <div class="upload-box">
            
            <input 
              type="file" 
              id="docUpload" 
              accept="image/*"
              (change)="onFileSelected($event)" 
              style="display: none;"
            />
            <label for="docUpload" class="upload-label">
              <span class="icon">⭳</span>
              <span class="text">
                {{ selectedFileName || 'Anexar foto do documento' }}
              </span>
            </label>
          </div>
        </div>

      <div class="grid-2">
        <div class="form-group">
          <label for="telefoneUrgencia">Telefone do contato de emergência</label>
          <input id="telefoneUrgencia" name="telefoneUrgencia" type="tel" required [(ngModel)]="telefoneUrgencia" />
        </div>
        <div class="form-group"></div>
      </div>

      <fieldset class="espacos-group">
        <legend>Espaços que serão utilizados</legend>
        <div class="checkbox-group">
          <label><input type="checkbox" name="espacos" value="Piscina" (change)="atualizarEspacos($event)" /> Piscina</label>
          <label><input type="checkbox" name="espacos" value="Quadra" (change)="atualizarEspacos($event)" /> Quadra</label>
          <label><input type="checkbox" name="espacos" value="Campo Society" (change)="atualizarEspacos($event)" /> Campo Society</label>
          <label><input type="checkbox" name="espacos" value="Quadra de Tênis" (change)="atualizarEspacos($event)" /> Quadra de Tênis</label>
          <label><input type="checkbox" name="espacos" value="Quadra de Areia" (change)="atualizarEspacos($event)" /> Quadra de Areia</label>
          <label><input type="checkbox" name="espacos" value="Pista de Atletismo" (change)="atualizarEspacos($event)" /> Pista de Atletismo</label>
        </div>
      </fieldset>

      <button type="submit" class="btn-concluir" [disabled]="form.invalid">Concluir</button>
      </div>
    </form>
  </div>
</div>